---
title: "リレーションシップ"
metaTitle: "Hasura の リレーションシップ | Hasura GraphQL チュートリアル"
metaDescription: "チュートリアルのこのパートでは、オブジェクトのリレーションシップと配列のリレーションシップを使って、ネストされたオブジェクトクエリを作成する方法について説明します"
---

import YoutubeEmbed from "../src/YoutubeEmbed.js";

<YoutubeEmbed link="https://www.youtube.com/embed/82t_AjcAtdc" />

リレーションシップにより、データベース内のテーブルやビューに対して、ネストされたオブジェクトクエリが作成されます。

GraphQL スキーマの関係は、次のいずれかです。

- オブジェクトリレーションシップ（1対1）
- 配列リレーションシップ（1対多）

## オブジェクトリレーションシップ

`todos` とそれに関連した `user` に関する詳細情報を照会したいとします。これは2つの間に関係が存在する場合、ネストされたクエリを使用して実現できます。これは1対1のクエリであるため、オブジェクトリレーションシップと呼ばれます。

このようなネストされたクエリの例は次のようになります:

```graphql
query {
  todos {
    id
    title
    user {
      id
      name
    }
  }
}
```

1つのクエリで todo とそれに関連するユーザー情報を取得できます。あらゆるレベルにネストできるため、これは非常に強力です。

## 配列リレーションシップ

配列リレーションシップのクエリ例を見てみましょう。

```graphql
query {
  users {
    id
    name
    todos {
      id
      title
    }
  }
}
```

このクエリではユーザーを取得でき、ユーザーごとに、そのユーザーが作成したタスク(複数)を取得します。 ユーザーは複数のタスクを持つことができるため、これは配列リレーションシップになります。

リレーションシップは、外部キー制約によって紐づけできます。 外部キー制約により、ぶら下がりデータがないことが保証されます。
Hasura Console はこれらの制約に基づいて自動的にリレーションの提案を行います。

制約はオプションですが、データの整合性のためにこれらの制約を適用することをお勧めします。

まだリレーションシップを定義していないため、上記のクエリはまだ機能しません。しかしこれにより、ネストされたクエリがどのように機能するかがわかります。
