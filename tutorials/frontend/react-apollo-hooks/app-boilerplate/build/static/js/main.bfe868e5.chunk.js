(this["webpackJsonpreact-apollo-todo"]=this["webpackJsonpreact-apollo-todo"]||[]).push([[0],{96:function(e,t,c){},97:function(e,t,c){"use strict";c.r(t),c.d(t,"history",(function(){return ee}));var n,i,s,r=c(26),a=c.n(r),l=c(0),o=c.n(l),d=c(55),j=c(18),u=c(11),b=c(31),m="graphql-tutorials.auth0.com",h="P38qnFo1lFAQJrzkun--wEzqljVNGcWW",O="hasura",p="openid profile email",v=c(2),x=function(e){var t=e.children,c=Object(u.d)();return Object(v.jsx)(b.a,{domain:m,clientId:h,redirectUri:window.location.origin,onRedirectCallback:function(e){c.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:O,scope:p,children:t})},f=c(13),N=c(107),g=c(113),I=function(e){var t=e.logoutHandler;return Object(v.jsx)(g.a,{id:"qsLogoutBtn",variant:"primary",className:"btn-margin logoutBtn",onClick:t,children:"Log Out"})},y=function(e){var t=e.logoutHandler;return Object(v.jsxs)(N.a,{className:"justify-content-between",children:[Object(v.jsx)(N.a.Brand,{children:"GraphQL Tutorial App"}),Object(v.jsx)(N.a.Collapse,{className:"justify-content-end",children:Object(v.jsx)(I,{logoutHandler:t})})]})},w=function(){var e=Object(b.b)(),t=e.loading,c=e.loginWithRedirect;return t?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsx)("div",{className:"overlay",children:Object(v.jsxs)("div",{className:"overlay-content",children:[Object(v.jsx)("div",{className:"overlay-heading",children:"Welcome to the GraphQL tutorial app"}),Object(v.jsx)("div",{className:"overlay-message",children:"Please login to continue"}),Object(v.jsx)("div",{className:"overlay-action",children:Object(v.jsx)(g.a,{id:"qsLoginBtn",variant:"primary",className:"btn-margin loginBtn",onClick:function(){c({})},children:"Log In"})})]})})},k=c(50),C=c(36),F=c(110),M=c(114),W=c(4),S=c(112),T=function(e){e.index;var t=e.todo,c=Object(F.a)(n||(n=Object(C.a)(["\n  mutation toggleTodo ($id: Int!, $isCompleted: Boolean!) {\n    update_todos(where: {id: {_eq: $id}}, _set: {is_completed: $isCompleted}) {\n      affected_rows\n    }\n  }\n"]))),i=Object(M.a)(c),s=Object(f.a)(i,1)[0];return Object(v.jsxs)("li",{children:[Object(v.jsx)("div",{className:"view",children:Object(v.jsxs)("div",{className:"round",children:[Object(v.jsx)("input",{checked:t.is_completed,type:"checkbox",id:t.id,onChange:function(){s({variables:{id:t.id,isCompleted:!t.is_completed},optimisticResponse:!0,update:function(e){var c=e.readQuery({query:z}).todos.map((function(e){return e.id===t.id?Object(W.a)(Object(W.a)({},e),{},{is_completed:!e.is_completed}):e}));e.writeQuery({query:z,data:{todos:c}})}})}}),Object(v.jsx)("label",{htmlFor:t.id})]})}),Object(v.jsx)("div",{className:"labelContent"+(t.is_completed?" completed":""),children:Object(v.jsx)("div",{children:t.title})}),Object(v.jsx)("button",{className:"closeBtn",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:"x"})]})},U=function(e){var t=e.todos,c=e.currentFilter,n=e.filterResultsFn,i=e.clearCompletedFn,s=function(e){return function(){n(e)}},r=Object(v.jsx)("button",{onClick:i,className:"clearComp",children:"Clear completed"}),a=t.filter((function(e){return!0!==e.is_completed})),l=t.length;return"active"===c?l=a.length:"completed"===c&&(l=t.length-a.length),Object(v.jsxs)("div",{className:"footerList",children:[Object(v.jsxs)("span",{children:[" ",l," item",1!==l?"s":""]}),Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{onClick:s("all"),children:Object(v.jsx)("a",{className:"all"===c?"selected":"",children:"All"})}),Object(v.jsx)("li",{onClick:s("active"),children:Object(v.jsx)("a",{className:"active"===c?"selected":"",children:"Active"})}),Object(v.jsx)("li",{onClick:s("completed"),children:Object(v.jsx)("a",{className:"completed"===c?"selected":"",children:"Completed"})})]}),r]})},z=Object(F.a)(i||(i=Object(C.a)(["\n  query getMyTodos {\n    todos(where: { is_public: { _eq: false} }, order_by: { created_at: desc }) {\n      id\n      title\n      created_at\n      is_completed\n  }\n }"]))),V=function(e){var t=Object(l.useState)({filter:"all",clearInProgress:!1}),c=Object(f.a)(t,2),n=c[0],i=c[1],s=e.todos,r=s;"active"===n.filter?r=s.filter((function(e){return!0!==e.is_completed})):"completed"===n.filter&&(r=s.filter((function(e){return!0===e.is_completed})));var a=[];return r.forEach((function(e,t){a.push(Object(v.jsx)(T,{index:t,todo:e},t))})),Object(v.jsxs)(l.Fragment,{children:[Object(v.jsx)("div",{className:"todoListWrapper",children:Object(v.jsx)("ul",{children:a})}),Object(v.jsx)(U,{todos:r,currentFilter:n.filter,filterResultsFn:function(e){i(Object(W.a)(Object(W.a)({},n),{},{filter:e}))},clearCompletedFn:function(){},clearInProgress:n.clearInProgress})]})},Z=function(){var e=Object(S.a)(z),t=e.loading,c=e.error,n=e.data;return t?Object(v.jsx)("div",{children:"Loading..."}):c?(console.error(c),Object(v.jsx)("div",{children:"Error!"})):Object(v.jsx)(V,{todos:n.todos})},X=Object(F.a)(s||(s=Object(C.a)(["\n mutation ($todo: String!, $isPublic: Boolean!) {\n   insert_todos(objects: {title: $todo, is_public: $isPublic}) {\n     affected_rows\n     returning {\n       id\n       title\n       created_at\n       is_completed\n     }\n   }\n }\n"]))),_=function(e){var t=e.isPublic,c=void 0!==t&&t,n=Object(l.useState)(""),i=Object(f.a)(n,2),s=i[0],r=i[1],a=Object(M.a)(X,{update:function(e,t){var n=t.data;if(c)return null;var i=e.readQuery({query:z}),s=n.insert_todos.returning[0];e.writeQuery({query:z,data:{todos:[s].concat(Object(k.a)(i.todos))}})},onCompleted:function(){r("")}}),o=Object(f.a)(a,1)[0];return Object(v.jsxs)("form",{className:"formInput",onSubmit:function(e){e.preventDefault(),o({variables:{todo:s,isPublic:c}})},children:[Object(v.jsx)("input",{className:"input",placeholder:"What needs to be done?",value:s,onChange:function(e){return r(e.target.value)}}),Object(v.jsx)("i",{className:"inputMarker fa fa-angle-right"})]})},G=function(){return Object(v.jsxs)("div",{className:"todoWrapper",children:[Object(v.jsx)("div",{className:"sectionHeader",children:"Personal todos"}),Object(v.jsx)(_,{}),Object(v.jsx)(Z,{})]})},Y=function(e){e.index;var t=e.todo;return Object(v.jsxs)("li",{children:[Object(v.jsxs)("div",{className:"userInfoPublic",title:t.user.name,children:["@",t.user.name]}),Object(v.jsx)("div",{className:"labelContent"+(t.is_completed?" completed":""),children:Object(v.jsx)("div",{children:t.title})})]})},R=function(e){var t={olderTodosAvailable:!0,newTodosCount:1,todos:[{id:"1",title:"This is public todo 1",user:{name:"someUser1"}},{id:"2",title:"This is public todo 2",is_completed:!1,is_public:!0,user:{name:"someUser2"}},{id:"3",title:"This is public todo 3",user:{name:"someUser3"}},{id:"4",title:"This is public todo 4",user:{name:"someUser4"}}]},c=t.todos,n=Object(v.jsx)("ul",{children:c.map((function(e,t){return Object(v.jsx)(Y,{index:t,todo:e},t)}))}),i="";t.newTodosCount&&(i=Object(v.jsxs)("div",{className:"loadMoreSection",onClick:function(){},children:["New tasks have arrived! (",t.newTodosCount.toString(),")"]}));var s=Object(v.jsx)("div",{className:"loadMoreSection",onClick:function(){},children:t.olderTodosAvailable?"Load older tasks":"No more public tasks!"});return Object(v.jsx)(l.Fragment,{children:Object(v.jsxs)("div",{className:"todoListWrapper",children:[i,n,s]})})},J=function(){return Object(v.jsxs)("div",{className:"todoWrapper",children:[Object(v.jsx)("div",{className:"sectionHeader",children:"Public feed (realtime)"}),Object(v.jsx)(_,{isPublic:!0}),Object(v.jsx)(R,{})]})},L=function(e){var t=e.user;return Object(v.jsxs)("div",{className:"userInfo",children:[Object(v.jsx)("div",{className:"userImg",children:Object(v.jsx)("i",{className:"far fa-user"})}),Object(v.jsx)("div",{className:"userName",children:t.name})]})},H=function(){var e=[{name:"someUser1"},{name:"someUser2"}],t=[];return e.forEach((function(e,c){t.push(Object(v.jsx)(L,{index:c,user:e},c))})),Object(v.jsxs)("div",{className:"onlineUsersWrapper",children:[Object(v.jsxs)("div",{className:"sliderHeader",children:["Online users - ",e.length]}),t]})},E=c(108),B=c(109),q=c(111),P=c(106),D=c(59),Q=c.n(D),A=c(73);var $=function(){var e=Object(l.useState)(null),t=Object(f.a)(e,2),c=t[0],n=t[1],i=Object(b.b)(),s=i.user,r=i.getAccessTokenSilently;return Object(l.useEffect)((function(){var e=function(){var e=Object(A.a)(Q.a.mark((function e(){var t,c,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O,c=p,e.prev=1,e.next=4,r({audience:t,scope:c});case 4:i=e.sent,n(i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[r,null===s||void 0===s?void 0:s.sub]),c},K=function(){var e=$(),t=Object(b.b)(),c=t.loading,n=t.logout,i=Object(l.useState)(new E.a({link:new B.a({uri:"https://hasura.io/learn/graphql",headers:{Authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik9FWTJSVGM1UlVOR05qSXhSRUV5TURJNFFUWXdNekZETWtReU1EQXdSVUV4UVVRM05EazFNQSJ9.eyJodHRwczovL2hhc3VyYS5pby9qd3QvY2xhaW1zIjp7IngtaGFzdXJhLWRlZmF1bHQtcm9sZSI6InVzZXIiLCJ4LWhhc3VyYS1hbGxvd2VkLXJvbGVzIjpbInVzZXIiXSwieC1oYXN1cmEtdXNlci1pZCI6ImF1dGgwfDYzMjhlZDdkNTlkM2E2Y2U1ZDg1MzhjMiJ9LCJuaWNrbmFtZSI6Im5vZGFyaS1nIiwibmFtZSI6Im5vZGFyaS1nQGhvdG1haWwuY29tIiwicGljdHVyZSI6Imh0dHBzOi8vcy5ncmF2YXRhci5jb20vYXZhdGFyLzNiMGU1MWEwYTY4NGVlNWE1Yjc0ZWI1NjY5ZTNkNWU1P3M9NDgwJnI9cGcmZD1odHRwcyUzQSUyRiUyRmNkbi5hdXRoMC5jb20lMkZhdmF0YXJzJTJGbm8ucG5nIiwidXBkYXRlZF9hdCI6IjIwMjItMTItMTNUMjM6MTc6NTIuMDU0WiIsImlzcyI6Imh0dHBzOi8vZ3JhcGhxbC10dXRvcmlhbHMuYXV0aDAuY29tLyIsInN1YiI6ImF1dGgwfDYzMjhlZDdkNTlkM2E2Y2U1ZDg1MzhjMiIsImF1ZCI6IlAzOHFuRm8xbEZBUUpyemt1bi0td0V6cWxqVk5HY1dXIiwiaWF0IjoxNjcwOTczNDk5LCJleHAiOjE2NzEwMDk0OTksImF0X2hhc2giOiJTWVlfY1l4V2dDR2RuSERzWm5Vek5nIiwic2lkIjoib01qTC1XeEZSUHBGSjZIT1ZXMF82bGc3NmRmZGY3OWoiLCJub25jZSI6IlFTdVVmaUVwY2tlNzFPekV-U1NraVFSWXVPdlRCb3dMIn0.onVBU3BIhFLFFmdiNae9Mcdx5ZZVum4ffMw7GCteJNYXGXVDH_OH46t_FOlCsXhw8o_9Qii0L6rHRiYXWEbI_ImviJ-qhLDXevGk3Vc69Q48CaWIX6DFRpyddk-fGKzNorWPGYAJN40vuKxXHwPMM4dzBywWsqM0kSjtBKtq-VZWnTN1DxFffUY71iruQfsyL9iJT-EvSWyvOz2lnUvz0-5Wp8QnQSFzzahX-5sNubmaXFaSqe22vEhT_EjMSyHnUU_ARbghBYyVcWfdzGwz9S-4p56YIYYH2Tl40q9Z-txehrMULdZ9BB5rHzGtb1rg9QJuEggH0AWJM6OsEPXWBg")}}),cache:new q.a})),s=Object(f.a)(i,1)[0];return c?Object(v.jsx)("div",{children:"Loading..."}):e?Object(v.jsx)(P.a,{client:s,children:Object(v.jsxs)("div",{children:[Object(v.jsx)(y,{logoutHandler:n}),Object(v.jsxs)("div",{className:"row container-fluid p-left-right-0 m-left-right-0",children:[Object(v.jsxs)("div",{className:"row col-md-9 p-left-right-0 m-left-right-0",children:[Object(v.jsx)("div",{className:"col-md-6 sliderMenu p-30",children:Object(v.jsx)(G,{})}),Object(v.jsx)("div",{className:"col-md-6 sliderMenu p-30 bg-gray border-right",children:Object(v.jsx)(J,{})})]}),Object(v.jsx)("div",{className:"col-md-3 p-left-right-0",children:Object(v.jsx)("div",{className:"col-md-12 sliderMenu p-30 bg-gray",children:Object(v.jsx)(H,{})})})]})]})}):Object(v.jsx)(w,{})},ee=(c(96),Object(j.a)());a.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(d.a,{children:Object(v.jsx)(x,{children:Object(v.jsx)(K,{})})})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.bfe868e5.chunk.js.map